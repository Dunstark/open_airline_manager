language: python
python:
  - "3.4"
  - "3.5"
services:
  - postgresql
env:
  global:
    - DJANGO_SETTINGS_MODULE="open_airline_manager.test_settings"
  matrix:
    - DJANGO_VERSION=1.8.9
    - DJANGO_VERSION=1.9.2
install:
  - pip install -q Django==$DJANGO_VERSION
  - pip install -q psycopg2
  - pip install coveralls
before_script:
  - psql -c 'create database oam_test;' -U postgres
  - python manage.py makemigrations
  - python manage.py migrate
script:
  - python manage.py test airline_manager
  - coverage run --source=airline_manager manage.py test airline_manager
after_success:
  - coveralls